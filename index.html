<!doctype html>
<html lang='en-us'>
	<head>
		<title>Mercator Studio</title>
		<link rel='shortcut icon' type='image/png' href='icon.png'>
		<meta charset='utf-8'>
		<meta name='author' content='Xing'>
		<meta name='description' content='A camera-feed-editing extension for Google Meet'>
		<meta name='viewport' content='width=device-width, initial-scale=1'>
		<meta property='og:title' content='Mercator Studio'>
		<meta property='og:type' content='website'>
		<meta property='og:url' content='https://x-ing.space/mercator'>
		<meta property='og:description' content='A camera-feed-editing extension for Google Meet'>
		<meta property='og:image' content='https://x-ing.space/mercator/icon.png'>
		<style>
html {
	margin: 0;
	background: #eee;
	font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif
}
body {
	margin: 0;
}
*{
	box-sizing: border-box;
}
main{
	margin-right: 1rem;
	margin-left: auto;
	width: 64ch;
	max-width: calc(100vw - 2rem);
	display: flex;
	flex-direction: column;
	align-items: center;
	text-align: center;
	right: 0
}
main>*{
	font-weight: normal ;
	width: inherit;
	max-width: inherit;
	margin-bottom: 1rem;
	line-height: 1.4rem;
}
h1 {
	margin-bottom: .4rem;
}
h2 {
	margin-bottom: 2.5rem;
}
#install{
	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-gap: 1rem;
}
a,button{
	flex-grow: 1;
	border-radius: 1ch;
	border: .15rem solid #aaa;
	font-family: inherit;
	font-size: 1.2rem;
	color: black;
	text-decoration: none;
	padding: 1rem;
	text-align: center;
	transition: background 200ms;
	display: flex;
	flex-direction: column;
	align-items: center;
	cursor: pointer;
}
a:focus,button:focus{
	outline: 0;
	border-color: black;
}
#install>a>svg{
	margin-bottom: .5rem;
}
a:hover,button:hover{
	background: white
}
#bookmarklet::after{
	content: 'Bookmarklet'
}
video{
	background: #ccc;
	border-radius: 1rem;
	width: 100%;
	height: auto;
	display: none;
}
#readme{
	text-align: left;
	white-space: pre-wrap;
	padding: 0 1rem;
}
		</style>
	</head>
	<body>
		<main>
			<svg width='128' height='128' viewBox='0 0 128 128' xmlns='http://www.w3.org/2000/svg'>
				<title>Logo of Mercator Filters</title>
				<circle cx='64' cy='64' r='64' fill='hsl(31, 100%, 73%)'/>

				<rect fill='hsl( 18, 100%, 68%)' width='96' x='16' y='0' height='128'/>
				<rect fill='hsl(-10, 100%, 80%)' width='80' x='16' y='0' height='128'/>
				<rect fill='hsl(  5,  90%, 72%)' width='64' x='16' y='0' height='128'/>
				<rect fill='hsl( 48, 100%, 75%)' width='48' x='16' y='0' height='128'/>
				<rect fill='hsl( 36, 100%, 70%)' width='32' x='16' y='0' height='128'/>
				<rect fill='hsl( 20,  90%, 70%)' width='16' x='16' y='0' height='128'/>

				<circle cx='64' cy='64' r='52' fill='hsl(191, 35%, 41%)'/>

				<rect x='34' y='46' width='44' height='36' fill='white' rx='8' ry='8'/>
				<path d='M68 64l22 -10v20z' fill='white' stroke-width='8' stroke='white' stroke-linejoin='round'/>

				<desc>(C) Xing 2020.</desc>
			</svg>
			<h1>Mercator Studio for Google Meet</h1>
			<h2>A project by Xing</h2>
			<section id='install'>
				<a href='https://chrome.google.com/webstore/detail/ohcmmfphdpigpccfppacepjhamgcffjh'>
					<svg height='32' viewBox="1 1 176 176"><style>.B{clip-path:url(#C)}.C{fill:#3e2723}.D{fill-opacity:.15}.E{fill-opacity:.2}</style><defs><circle id="A" cx="96" cy="96" r="88"/><path id="B" d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z"/></defs><clipPath id="C"><use xlink:href="#A"/></clipPath><g class="B" transform="translate(-7 -7)"><path d="M21.97 8v108h39.4L96 56h88V8z" fill="#db4437"/><linearGradient id="D" x1="29.34" x2="81.84" y1="75.02" y2="44.35" gradientUnits="userSpaceOnUse"><stop stop-color="#a52714" stop-opacity=".6" offset="0"/><stop stop-color="#a52714" stop-opacity="0" offset=".66"/></linearGradient><path d="M21.97 8v108h39.4L96 56h88V8z" fill="url(#D)"/><path d="M62.3 115.6L22.48 47.3l-.58 1 39.54 67.8z" class="C D"/><use xlink:href="#B" fill="#0f9d58"/><linearGradient id="E" x1="110.9" x2="52.54" y1="164.5" y2="130.3" gradientUnits="userSpaceOnUse"><stop stop-color="#055524" stop-opacity=".4" offset="0"/><stop stop-color="#055524" stop-opacity="0" offset=".33"/></linearGradient><path d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z" fill="url(#E)"/><path d="M129.8 117.3l-.83-.48-38.4 67.15h1.15l38.1-66.64z" fill="#263238" class="D"/><defs><path id="F" d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z"/></defs><clipPath id="G"><use xlink:href="#F"/></clipPath><g clip-path="url(#G)"><path d="M96 56l34.65 60-38.88 68H184V56z" fill="#ffcd40"/><linearGradient id="H" x1="121.9" x2="136.6" y1="49.8" y2="114.1" gradientUnits="userSpaceOnUse"><stop stop-color="#ea6100" stop-opacity=".3" offset="0"/><stop stop-color="#ea6100" stop-opacity="0" offset=".66"/></linearGradient><path d="M96 56l34.65 60-38.88 68H184V56z" fill="url(#H)"/></g><path d="M96 56l34.65 60-38.88 68H184V56z" fill="#ffcd40"/><path d="M96 56l34.65 60-38.88 68H184V56z" fill="url(#H)"/><defs><path id="I" d="M96 56l34.65 60-38.88 68H184V56z"/></defs><clipPath id="J"><use xlink:href="#I"/></clipPath><g clip-path="url(#J)"><path d="M21.97 8v108h39.4L96 56h88V8z" fill="#db4437"/><path d="M21.97 8v108h39.4L96 56h88V8z" fill="url(#D)"/></g></g><radialGradient id="K" cx="668.2" cy="55.95" r="84.08" gradientTransform="translate(-576)" gradientUnits="userSpaceOnUse"><stop stop-color="#3e2723" stop-opacity=".2" offset="0"/><stop stop-color="#3e2723" stop-opacity="0" offset="1"/></radialGradient><g transform="translate(-7 -7)"><path d="M96 56v20.95L174.4 56z" fill="url(#K)" class="B"/><g class="B"><defs><path id="L" d="M21.97 8v40.34L61.36 116 96 56h88V8z"/></defs><clipPath id="M"><use xlink:href="#L"/></clipPath><g clip-path="url(#M)"><use xlink:href="#B" fill="#0f9d58"/><path d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z" fill="url(#E)"/></g></g></g><radialGradient id="N" cx="597.9" cy="48.52" r="78.04" gradientTransform="translate(-576)" gradientUnits="userSpaceOnUse"><stop stop-color="#3e2723" stop-opacity=".2" offset="0"/><stop stop-color="#3e2723" stop-opacity="0" offset="1"/></radialGradient><path transform="translate(-7 -7)" d="M21.97 48.45l57.25 57.24L61.36 116z" fill="url(#N)" class="B"/><radialGradient id="O" cx="671.8" cy="96.14" r="87.87" gradientTransform="translate(-576)" gradientUnits="userSpaceOnUse"><stop stop-color="#263238" stop-opacity=".2" offset="0"/><stop stop-color="#263238" stop-opacity="0" offset="1"/></radialGradient><g transform="translate(-7 -7)"><path d="M91.83 183.9l20.96-78.2 17.86 10.3z" fill="url(#O)" class="B"/><g class="B"><circle cx="96" cy="96" r="40" fill="#f1f1f1"/><circle cx="96" cy="96" r="32" fill="#4285f4"/><path d="M96 55c-22.1 0-40 17.9-40 40v1c0-22.1 17.9-40 40-40h88v-1H96z" class="C E"/><path d="M130.6 116c-6.92 11.94-19.8 20-34.6 20-14.8 0-27.7-8.06-34.6-20h-.04L8 24.48v1L61.4 117c6.92 11.94 19.8 20 34.6 20 14.8 0 27.68-8.05 34.6-20h.05v-1h-.06z" fill="#fff" fill-opacity=".1"/><path d="M97 56c-.17 0-.33.02-.5.03C118.36 56.3 136 74.08 136 96s-17.64 39.7-39.5 39.97c.17 0 .33.03.5.03 22.1 0 40-17.9 40-40s-17.9-40-40-40z" opacity=".1" class="C"/><path d="M131 117.3c3.4-5.88 5.37-12.68 5.37-19.96a39.87 39.87 0 0 0-1.87-12.09c.95 3.42 1.5 7 1.5 10.73 0 7.28-1.97 14.08-5.37 19.96l.02.04-38.88 68h1.16L131 117.3z" fill="#fff" class="E"/><path d="M96 9c48.43 0 87.72 39.13 88 87.5 0-.17.01-.33.01-.5 0-48.6-39.4-88-88-88S8 47.4 8 96c0 .17.01.33.01.5C8.28 48.13 47.57 9 96 9z" fill="#fff" class="E"/><path d="M96 183c48.43 0 87.72-39.13 88-87.5 0 .17.01.33.01.5 0 48.6-39.4 88-88 88S8 144.6 8 96c0-.17.01-.33.01-.5.27 48.37 39.56 87.5 88 87.5z" class="C D"/></g></g></svg>
					Chrome Web Store
				</a>
				<a href='https://addons.mozilla.org/en-US/firefox/addon/mercator-studio/'>
					 <svg height='32' viewBox="0 0 87.418564 81.96698"> <defs id="defs978"> <linearGradient gradientTransform="translate(3.7,-0.0040855)" gradientUnits="userSpaceOnUse" y2="74.468002" x2="6.447" y1="12.393" x1="70.786003" id="a"> <stop id="stop834" stop-color="#fff44f" offset=".048" /> <stop id="stop836" stop-color="#ffe847" offset=".111" /> <stop id="stop838" stop-color="#ffc830" offset=".225" /> <stop id="stop840" stop-color="#ff980e" offset=".368" /> <stop id="stop842" stop-color="#ff8b16" offset=".401" /> <stop id="stop844" stop-color="#ff672a" offset=".462" /> <stop id="stop846" stop-color="#ff3647" offset=".534" /> <stop id="stop848" stop-color="#e31587" offset=".705" /> </linearGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="80.796997" cy="-8515.1211" cx="-7907.187" id="b"> <stop id="stop851" stop-color="#ffbd4f" offset=".129" /> <stop id="stop853" stop-color="#ffac31" offset=".186" /> <stop id="stop855" stop-color="#ff9d17" offset=".247" /> <stop id="stop857" stop-color="#ff980e" offset=".283" /> <stop id="stop859" stop-color="#ff563b" offset=".403" /> <stop id="stop861" stop-color="#ff3750" offset=".467" /> <stop id="stop863" stop-color="#f5156c" offset=".71" /> <stop id="stop865" stop-color="#eb0878" offset=".782" /> <stop id="stop867" stop-color="#e50080" offset=".86" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="80.796997" cy="-8482.0889" cx="-7936.7109" id="c"> <stop id="stop870" stop-color="#960e18" offset=".3" /> <stop id="stop872" stop-opacity=".74" stop-color="#b11927" offset=".351" /> <stop id="stop874" stop-opacity=".343" stop-color="#db293d" offset=".435" /> <stop id="stop876" stop-opacity=".094" stop-color="#f5334b" offset=".497" /> <stop id="stop878" stop-opacity="0" stop-color="#ff3750" offset=".53" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="58.534" cy="-8533.457" cx="-7926.9702" id="d"> <stop id="stop881" stop-color="#fff44f" offset=".132" /> <stop id="stop883" stop-color="#ffdc3e" offset=".252" /> <stop id="stop885" stop-color="#ff9d12" offset=".506" /> <stop id="stop887" stop-color="#ff980e" offset=".526" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="38.471001" cy="-8460.9844" cx="-7945.6479" id="e"> <stop id="stop890" stop-color="#3a8ee6" offset=".353" /> <stop id="stop892" stop-color="#5c79f0" offset=".472" /> <stop id="stop894" stop-color="#9059ff" offset=".669" /> <stop id="stop896" stop-color="#c139e6" offset="1" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.972,-0.235,0.275,1.138,10095.002,7833.7939)" r="20.396999" cy="-8491.5459" cx="-7935.6201" id="f"> <stop id="stop899" stop-opacity="0" stop-color="#9059ff" offset=".206" /> <stop id="stop901" stop-opacity=".064" stop-color="#8c4ff3" offset=".278" /> <stop id="stop903" stop-opacity=".45" stop-color="#7716a8" offset=".747" /> <stop id="stop905" stop-opacity=".6" stop-color="#6e008b" offset=".975" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="27.676001" cy="-8518.4268" cx="-7937.731" id="g"> <stop id="stop908" stop-color="#ffe226" offset="0" /> <stop id="stop910" stop-color="#ffdb27" offset=".121" /> <stop id="stop912" stop-color="#ffc82a" offset=".295" /> <stop id="stop914" stop-color="#ffa930" offset=".502" /> <stop id="stop916" stop-color="#ff7e37" offset=".732" /> <stop id="stop918" stop-color="#ff7139" offset=".792" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="118.081" cy="-8535.9814" cx="-7915.9771" id="h"> <stop id="stop921" stop-color="#fff44f" offset=".113" /> <stop id="stop923" stop-color="#ff980e" offset=".456" /> <stop id="stop925" stop-color="#ff5634" offset=".622" /> <stop id="stop927" stop-color="#ff3647" offset=".716" /> <stop id="stop929" stop-color="#e31587" offset=".904" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="matrix(0.105,0.995,-0.653,0.069,-4680.304,8470.1869)" r="86.499001" cy="-8522.8594" cx="-7927.165" id="i"> <stop id="stop932" stop-color="#fff44f" offset="0" /> <stop id="stop934" stop-color="#ffe847" offset=".06" /> <stop id="stop936" stop-color="#ffc830" offset=".168" /> <stop id="stop938" stop-color="#ff980e" offset=".304" /> <stop id="stop940" stop-color="#ff8b16" offset=".356" /> <stop id="stop942" stop-color="#ff672a" offset=".455" /> <stop id="stop944" stop-color="#ff3647" offset=".57" /> <stop id="stop946" stop-color="#e31587" offset=".737" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="73.720001" cy="-8508.1758" cx="-7938.3828" id="j"> <stop id="stop949" stop-color="#fff44f" offset=".137" /> <stop id="stop951" stop-color="#ff980e" offset=".48" /> <stop id="stop953" stop-color="#ff5634" offset=".592" /> <stop id="stop955" stop-color="#ff3647" offset=".655" /> <stop id="stop957" stop-color="#e31587" offset=".904" /> </radialGradient> <radialGradient gradientUnits="userSpaceOnUse" gradientTransform="translate(7978.7,8523.9959)" r="80.685997" cy="-8503.8613" cx="-7918.9229" id="k"> <stop id="stop960" stop-color="#fff44f" offset=".094" /> <stop id="stop962" stop-color="#ffe141" offset=".231" /> <stop id="stop964" stop-color="#ffaf1e" offset=".509" /> <stop id="stop966" stop-color="#ff980e" offset=".626" /> </radialGradient> <linearGradient gradientTransform="translate(3.7,-0.0040855)" gradientUnits="userSpaceOnUse" y2="66.806" x2="15.267" y1="12.061" x1="70.013" id="l"> <stop id="stop969" stop-opacity=".8" stop-color="#fff44f" offset=".167" /> <stop id="stop971" stop-opacity=".634" stop-color="#fff44f" offset=".266" /> <stop id="stop973" stop-opacity=".217" stop-color="#fff44f" offset=".489" /> <stop id="stop975" stop-opacity="0" stop-color="#fff44f" offset=".6" /> </linearGradient> </defs> <path style="fill:url(#a)" id="path980" d="m 79.616,26.826915 c -1.684,-4.052 -5.1,-8.427 -7.775,-9.81 a 40.266,40.266 0 0 1 3.925,11.764 l 0.007,0.065 c -4.382,-10.925 -11.813,-15.33 -17.882,-24.9220005 -0.307,-0.485 -0.614,-0.971 -0.913,-1.484 -0.171,-0.293 -0.308,-0.557 -0.427,-0.8 a 7.053,7.053 0 0 1 -0.578,-1.535 0.1,0.1 0 0 0 -0.088,-0.1 0.138,0.138 0 0 0 -0.073,0 c -0.005,0 -0.013,0.009 -0.019,0.011 -0.006,0.002 -0.019,0.011 -0.028,0.015 l 0.015,-0.026 c -9.735,5.7 -13.038,16.2520005 -13.342,21.5300005 a 19.387,19.387 0 0 0 -10.666,4.111 11.587,11.587 0 0 0 -1,-0.758 17.968,17.968 0 0 1 -0.109,-9.473 28.705,28.705 0 0 0 -9.329,7.21 h -0.018 c -1.536,-1.947 -1.428,-8.367 -1.34,-9.708 a 6.928,6.928 0 0 0 -1.294,0.687 28.225,28.225 0 0 0 -3.788,3.245 33.845,33.845 0 0 0 -3.623,4.347 v 0.006 -0.007 a 32.733,32.733 0 0 0 -5.2,11.743 l -0.052,0.256 c -0.073,0.341 -0.336,2.049 -0.381,2.42 0,0.029 -0.006,0.056 -0.009,0.085 A 36.937,36.937 0 0 0 5,41.041915 v 0.2 a 38.759,38.759 0 0 0 76.954,6.554 c 0.065,-0.5 0.118,-0.995 0.176,-1.5 a 39.857,39.857 0 0 0 -2.514,-19.469 z m -44.67,30.338 c 0.181,0.087 0.351,0.181 0.537,0.264 l 0.027,0.017 q -0.282,-0.135 -0.564,-0.281 z m 8.878,-23.376 z m 31.952,-4.934 v -0.037 l 0.007,0.041 z" /> <path style="fill:url(#b)" id="path982" d="m 79.616,26.826915 c -1.684,-4.052 -5.1,-8.427 -7.775,-9.81 a 40.266,40.266 0 0 1 3.925,11.764 v 0.037 l 0.007,0.041 a 35.1,35.1 0 0 1 -1.206,26.158 c -4.442,9.531 -15.194,19.3 -32.024,18.825 -18.185,-0.515 -34.2,-14.009 -37.194,-31.683 -0.545,-2.787 0,-4.2 0.274,-6.465 A 28.876,28.876 0 0 0 5,41.041915 v 0.2 a 38.759,38.759 0 0 0 76.954,6.554 c 0.065,-0.5 0.118,-0.995 0.176,-1.5 a 39.857,39.857 0 0 0 -2.514,-19.469 z" /> <path style="fill:url(#c)" id="path984" d="m 79.616,26.826915 c -1.684,-4.052 -5.1,-8.427 -7.775,-9.81 a 40.266,40.266 0 0 1 3.925,11.764 v 0.037 l 0.007,0.041 a 35.1,35.1 0 0 1 -1.206,26.158 c -4.442,9.531 -15.194,19.3 -32.024,18.825 -18.185,-0.515 -34.2,-14.009 -37.194,-31.683 -0.545,-2.787 0,-4.2 0.274,-6.465 A 28.876,28.876 0 0 0 5,41.041915 v 0.2 a 38.759,38.759 0 0 0 76.954,6.554 c 0.065,-0.5 0.118,-0.995 0.176,-1.5 a 39.857,39.857 0 0 0 -2.514,-19.469 z" /> <path style="fill:url(#d)" id="path986" d="m 60.782,31.382915 c 0.084,0.059 0.162,0.118 0.241,0.177 a 21.1,21.1 0 0 0 -3.6,-4.695 C 45.377,14.816915 54.266,0.7419145 55.765,0.0269145 l 0.015,-0.022 c -9.735,5.7 -13.038,16.2520005 -13.342,21.5300005 0.452,-0.031 0.9,-0.069 1.362,-0.069 a 19.56,19.56 0 0 1 16.982,9.917 z" /> <path style="fill:url(#e)" id="path988" d="m 43.825,33.788915 c -0.064,0.964 -3.47,4.289 -4.661,4.289 -11.021,0 -12.81,6.667 -12.81,6.667 0.488,5.614 4.4,10.238 9.129,12.684 0.216,0.112 0.435,0.213 0.654,0.312 q 0.569,0.252 1.138,0.466 a 17.235,17.235 0 0 0 5.043,0.973 c 19.317,0.906 23.059,-23.1 9.119,-30.066 a 13.38,13.38 0 0 1 9.345,2.269 19.56,19.56 0 0 0 -16.982,-9.917 c -0.46,0 -0.91,0.038 -1.362,0.069 a 19.387,19.387 0 0 0 -10.666,4.111 c 0.591,0.5 1.258,1.168 2.663,2.553 2.63,2.591 9.375,5.275 9.39,5.59 z" /> <path style="fill:url(#f)" id="path990" d="m 43.825,33.788915 c -0.064,0.964 -3.47,4.289 -4.661,4.289 -11.021,0 -12.81,6.667 -12.81,6.667 0.488,5.614 4.4,10.238 9.129,12.684 0.216,0.112 0.435,0.213 0.654,0.312 q 0.569,0.252 1.138,0.466 a 17.235,17.235 0 0 0 5.043,0.973 c 19.317,0.906 23.059,-23.1 9.119,-30.066 a 13.38,13.38 0 0 1 9.345,2.269 19.56,19.56 0 0 0 -16.982,-9.917 c -0.46,0 -0.91,0.038 -1.362,0.069 a 19.387,19.387 0 0 0 -10.666,4.111 c 0.591,0.5 1.258,1.168 2.663,2.553 2.63,2.591 9.375,5.275 9.39,5.59 z" /> <path style="fill:url(#g)" id="path992" d="m 29.965,24.356915 c 0.314,0.2 0.573,0.374 0.8,0.531 a 17.968,17.968 0 0 1 -0.109,-9.473 28.705,28.705 0 0 0 -9.329,7.21 c 0.189,-0.005 5.811,-0.106 8.638,1.732 z" /> <path style="fill:url(#h)" id="path994" d="m 5.354,42.158915 c 2.991,17.674 19.009,31.168 37.194,31.683 16.83,0.476 27.582,-9.294 32.024,-18.825 a 35.1,35.1 0 0 0 1.206,-26.158 v -0.037 c 0,-0.029 -0.006,-0.046 0,-0.037 l 0.007,0.065 c 1.375,8.977 -3.191,17.674 -10.329,23.555 l -0.022,0.05 c -13.908,11.327 -27.218,6.834 -29.912,5 q -0.282,-0.135 -0.564,-0.281 c -8.109,-3.876 -11.459,-11.264 -10.741,-17.6 a 9.953,9.953 0 0 1 -9.181,-5.775 14.618,14.618 0 0 1 14.249,-0.572 19.3,19.3 0 0 0 14.552,0.572 c -0.015,-0.315 -6.76,-3 -9.39,-5.59 -1.405,-1.385 -2.072,-2.052 -2.663,-2.553 a 11.587,11.587 0 0 0 -1,-0.758 c -0.23,-0.157 -0.489,-0.327 -0.8,-0.531 -2.827,-1.838 -8.449,-1.737 -8.635,-1.732 h -0.018 c -1.536,-1.947 -1.428,-8.367 -1.34,-9.708 a 6.928,6.928 0 0 0 -1.294,0.687 28.225,28.225 0 0 0 -3.788,3.245 33.845,33.845 0 0 0 -3.638,4.337 v 0.006 -0.007 a 32.733,32.733 0 0 0 -5.2,11.743 c -0.019,0.079 -1.396,6.099 -0.717,9.221 z" /> <path style="fill:url(#i)" id="path996" d="m 57.425,26.864915 a 21.1,21.1 0 0 1 3.6,4.7 c 0.213,0.161 0.412,0.321 0.581,0.476 8.787,8.1 4.183,19.55 3.84,20.365 7.138,-5.881 11.7,-14.578 10.329,-23.555 -4.384,-10.93 -11.815,-15.335 -17.884,-24.9270005 -0.307,-0.485 -0.614,-0.971 -0.913,-1.484 -0.171,-0.293 -0.308,-0.557 -0.427,-0.8 a 7.053,7.053 0 0 1 -0.578,-1.535 0.1,0.1 0 0 0 -0.088,-0.1 0.138,0.138 0 0 0 -0.073,0 c -0.005,0 -0.013,0.009 -0.019,0.011 -0.006,0.002 -0.019,0.011 -0.028,0.015 -1.499,0.711 -10.388,14.7860005 1.66,26.8340005 z" /> <path style="fill:url(#j)" id="path998" d="m 61.6,32.035915 c -0.169,-0.155 -0.368,-0.315 -0.581,-0.476 -0.079,-0.059 -0.157,-0.118 -0.241,-0.177 a 13.38,13.38 0 0 0 -9.345,-2.269 c 13.94,6.97 10.2,30.972 -9.119,30.066 a 17.235,17.235 0 0 1 -5.043,-0.973 q -0.569,-0.213 -1.138,-0.466 c -0.219,-0.1 -0.438,-0.2 -0.654,-0.312 l 0.027,0.017 c 2.694,1.839 16,6.332 29.912,-5 l 0.022,-0.05 c 0.347,-0.81 4.951,-12.263 -3.84,-20.36 z" /> <path style="fill:url(#k)" id="path1000" d="m 26.354,44.744915 c 0,0 1.789,-6.667 12.81,-6.667 1.191,0 4.6,-3.325 4.661,-4.289 a 19.3,19.3 0 0 1 -14.552,-0.572 14.618,14.618 0 0 0 -14.249,0.572 9.953,9.953 0 0 0 9.181,5.775 c -0.718,6.337 2.632,13.725 10.741,17.6 0.181,0.087 0.351,0.181 0.537,0.264 -4.733,-2.445 -8.641,-7.069 -9.129,-12.683 z" /> <path style="fill:url(#l)" id="path1002" d="m 79.616,26.826915 c -1.684,-4.052 -5.1,-8.427 -7.775,-9.81 a 40.266,40.266 0 0 1 3.925,11.764 l 0.007,0.065 c -4.382,-10.925 -11.813,-15.33 -17.882,-24.9220005 -0.307,-0.485 -0.614,-0.971 -0.913,-1.484 -0.171,-0.293 -0.308,-0.557 -0.427,-0.8 a 7.053,7.053 0 0 1 -0.578,-1.535 0.1,0.1 0 0 0 -0.088,-0.1 0.138,0.138 0 0 0 -0.073,0 c -0.005,0 -0.013,0.009 -0.019,0.011 -0.006,0.002 -0.019,0.011 -0.028,0.015 l 0.015,-0.026 c -9.735,5.7 -13.038,16.2520005 -13.342,21.5300005 0.452,-0.031 0.9,-0.069 1.362,-0.069 a 19.56,19.56 0 0 1 16.982,9.917 13.38,13.38 0 0 0 -9.345,-2.269 c 13.94,6.97 10.2,30.972 -9.119,30.066 a 17.235,17.235 0 0 1 -5.043,-0.973 q -0.569,-0.213 -1.138,-0.466 c -0.219,-0.1 -0.438,-0.2 -0.654,-0.312 l 0.027,0.017 q -0.282,-0.135 -0.564,-0.281 c 0.181,0.087 0.351,0.181 0.537,0.264 -4.733,-2.446 -8.641,-7.07 -9.129,-12.684 0,0 1.789,-6.667 12.81,-6.667 1.191,0 4.6,-3.325 4.661,-4.289 -0.015,-0.315 -6.76,-3 -9.39,-5.59 -1.405,-1.385 -2.072,-2.052 -2.663,-2.553 a 11.587,11.587 0 0 0 -1,-0.758 17.968,17.968 0 0 1 -0.109,-9.473 28.705,28.705 0 0 0 -9.329,7.21 h -0.018 c -1.536,-1.947 -1.428,-8.367 -1.34,-9.708 a 6.928,6.928 0 0 0 -1.294,0.687 28.225,28.225 0 0 0 -3.788,3.245 33.845,33.845 0 0 0 -3.623,4.347 v 0.006 -0.007 a 32.733,32.733 0 0 0 -5.2,11.743 l -0.052,0.256 c -0.073,0.341 -0.4,2.073 -0.447,2.445 0,0.028 0,-0.029 0,0 A 45.094,45.094 0 0 0 5,41.041915 v 0.2 a 38.759,38.759 0 0 0 76.954,6.554 c 0.065,-0.5 0.118,-0.995 0.176,-1.5 a 39.857,39.857 0 0 0 -2.514,-19.469 z m -3.845,1.991 0.007,0.041 z" /> </svg>
					Firefox Addons
				</a>
				<a href='https://greasyfork.org/en/scripts/406944'>
					<svg height='32' viewBox="0 0 96 96"> <circle fill="#000" r="48" cy="48" cx="48"/> <g id="text-group"><path fill="#fff" d=" M10 5h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18 M10 25h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18 M10 45h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18 M10 65h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18 M10 85h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18m10 0h2v18h-2v-18 "/></g> <g id="fork-group"><path fill="#000" d="M20 16l62 62l-8 8l-62-62z"/><path fill="#fff" d="M18 18l60 60l-4 4l-60-60z"/></g> </svg>
					Greasyfork Scripts
				</a>
				<a id='bookmarklet' href='javascript:(async function(){try{const n=document.createElement("aside");n.style.position="absolute",n.style.zIndex=10,n.style.pointerEvents="none";const r=n.attachShadow({mode:"open"}),a=navigator.userAgent.includes("Firefox"),i=document.createElement("main"),o=document.createElement("style"),s="Roboto, RobotDraft, Helvetica, sans-serif, serif",l=`"Google Sans", `+s;o.textContent=`\na, button {\n\tall: unset;\n\tcursor: pointer;\n\ttext-align: center;\n}\nmain, main *, a, button {\n\tbox-sizing: border-box;\n\ttransition-duration: 200ms;\n\ttransition-property: opacity, background, transform, padding, border-radius, border-color;\n\n\tcolor: inherit;\n\tfont-family: inherit;\n\tfont-size: inherit;\n\tfont-weight: inherit;\n}\n:not(input) {\n\tuser-select: none;\n}\n@media (prefers-reduced-motion) {\n\t* {\n\t\ttransition-duration: 0s;\n\t}\n}\n:focus {\n\toutline: 0;\n}\n\n/* -- */\n\nmain {\n\t--bg: #3C4042;\n\t--bg-x: #434649;\n\t--bg-xx: #505457;\n\t--dark: black;\n\t--txt: white;\t\n\n\tfont-family: ${l};\n\tfont-size: 0.9rem;\n\twidth: 25rem;\n\tmax-width: 100vw;\n\theight: 100vh;\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tpadding: 0.5rem;\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n\toverflow: hidden;\n\tpointer-events: none;\n}\nmain > * {\n\tcolor: var(--txt);\n}\n#fields,\n#bar,\n#labels > * {\n\tborder-radius: .5rem;\n\tbox-shadow: 0 .1rem .25rem #0004;\n\tpointer-events: all;\n}\n:not(.edit)>#fields{\n\tdisplay: none;\n\topacity: 0;\n}\n:not(.edit)>#bar{\n\tborder-radius: 1.5rem;\n\tflex-basis: 4rem;\n}\n#text:hover, #text:focus,\n#presets:hover,\n#bar>:hover, #bar>:focus,\n#tips > * {\n\tbackground: var(--bg-x);\n}\n#text:hover:focus,\n#presets:hover,\n#bar>:hover:focus {\n\tbackground: var(--bg-xx);\n}\n\n/* -- */\n\n#tips {\n\tposition: relative;\n\tfont-family: ${s};\n\tfont-size: 0.8rem;\n\tline-height: 1rem;\n\tz-index: 10;\n}\n#tips > * {\n\tdisplay: block;\n\tposition: absolute;\n\tbottom: 0rem;\n\theight: 1.5rem;\n\tpadding: 0.25rem;\n\tborder-radius: 0.25rem;\n}\n#tips > :not(.show) {\n\topacity: 0;\n}\n#tips > [for="minimize"] {\n\tleft: 0;\n}\n#tips > [for="previews"] {\n\tleft: 50%;\n\ttransform: translateX(-50%);\n}\n#tips > [for="donate"] {\n\tright: 0;\n}\n.edit > #tips > * {\n\ttop: 1rem;\n}\n\n/* -- */\n\n#bar {\n\tmargin-top: .5rem;\n\toverflow: hidden;\n\tflex: 0 0 auto;\n\tdisplay: flex;\n}\n.minimize #bar {\n\twidth: 1rem;\n}\n#bar > * {\n\tbackground: var(--bg);\n}\n#bar #minimize,\n#bar #donate {\n\tfont-size: .5rem;\n\tflex: 0 0 1.5rem;\n\twidth: var(--radius);\n\ttext-align: center;\n\tline-height: 4rem;\n\theight: 100%;\n\toverflow-wrap: anywhere;\n}\n.edit #bar #minimize,\n.edit #bar #donate,\n.edit #bar h2,\n.minimize #bar :not(#minimize) {\n\tdisplay: none;\n}\n:not(.minimize) #minimize:hover,\n.minimize #minimize:not(:hover) {\n\tpadding-right: 2px;\n}\n#donate:hover {\n\tpadding-left: 2px;\n}\n.minimize #minimize{\n\tflex-basis: 1rem;\n}\n#previews {\n\tflex: 1 0 0;\n\twidth: 0;\n\tdisplay: flex;\n}\n#previews video,\n#previews canvas {\n\twidth: auto;\n\theight: auto;\n\tbackground-image: linear-gradient(90deg,\n\t\thsl( 18, 100%, 68%) 16.7%,\thsl(-10, 100%, 80%) 16.7%,\n\t\thsl(-10, 100%, 80%) 33.3%,\thsl(5,90%, 72%) 33.3%,\n\t\thsl(5,90%, 72%) 50%,\thsl( 48, 100%, 75%) 50%,\n\t\thsl( 48, 100%, 75%) 66.7%,\thsl( 36, 100%, 70%) 66.7%,\n\t\thsl( 36, 100%, 70%) 83.3%,\thsl( 20,90%, 70%) 83.3%\n\t);\n}\n.edit #previews video,\n.edit #previews canvas {\n\theight: auto;\n\tmax-width: 50%;\n\tobject-fit: contain;\n}\n#previews>h2 {\n\tflex-grow: 1;\n\tfont-size: .9rem;\n\tline-height: 1.4;\n\tdisplay: flex;\n\ttext-align: center;\n\talign-items: center;\n\tjustify-content: center;\n}\n#previews:hover>h2 {\n\ttransform: translateY(-2px);\n}\n\n/* -- */\n\n#fields {\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden scroll;\n\tpadding: 1rem;\n\tflex: 0 1 auto;\n\tbackground: var(--bg);\n}\n#presets,\n#fields > label {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n#fields > label+label {\n\tmargin-top: 0.5rem;\n}\n#fields > label:focus-within{\n\tfont-weight: bold;\n}\n#fields > label > * {\n\twidth: calc(100% - 4.5rem);\n\theight: 1rem;\n\tborder-radius: 0.5rem;\n\tborder: 0.15rem solid var(--bg-x);\n\tfont-size: 0.8rem;\n}\n#presets:focus-within,\n#fields > label > :focus,\n#fields > label > :hover {\n\tborder-width: 0.15rem;\n\tborder-color: var(--txt);\n}\n#presets {\n\toverflow: hidden;\n\theight: auto;\n\tmargin-bottom: -0.15rem;\n}\n#presets>* {\n\tborder: 0;\n\tborder-radius: 0;\n\tbackground: transparent;\n\tflex-grow: 1;\n\theight: 1.3rem;\n\tfont-weight: normal;\n}\n#presets>:first-child {\n\tborder-radius: 0.25rem 0 0 0.25rem;\n}\n#presets>:last-child {\n\tborder-radius: 0 0.25rem 0.25rem 0;\n}\n#presets>:hover {\n\tbackground: var(--dark);\n}\n#presets>:focus {\n\tbackground: var(--txt);\n\tcolor: var(--bg);\n}\n#fields > label > #text {\n\ttext-align: center;\n\tfont-weight: bold;\n\tresize: none;\n\tline-height: 1.1;\n\toverflow: hidden scroll;\n\tbackground: var(--bg);\n\theight: auto;\n}\n#text::placeholder {\n\tcolor: inherit;\n}\n#text::selection {\n\tcolor: var(--dark);\n\tbackground: var(--txt);\n}\ninput[type=checkbox] {\n\tcursor: pointer;\n}\ninput[type=range] {\n\t-webkit-appearance: none;\n\tcursor: ew-resize;\n\t--gradient: transparent, transparent;\n\t--rainbow: hsl(0, 80%, 75%), hsl(30, 80%, 75%), hsl(60, 80%, 75%), hsl(90, 80%, 75%), hsl(120, 80%, 75%), hsl(150, 80%, 75%), hsl(180, 80%, 75%), hsl(210, 80%, 75%), hsl(240, 80%, 75%), hsl(270, 80%, 75%), hsl(300, 80%, 75%), hsl(330, 80%, 75%);\n\tbackground: linear-gradient(90deg, var(--gradient)), linear-gradient(90deg, var(--rainbow));\n}\ninput[type=range]::-webkit-slider-thumb {\n\t-webkit-appearance: none;\n\ttransition: inherit;\n\tbackground: var(--bg);\n\twidth: 1rem;\n\theight: 1rem;\n\tborder: 0.1rem solid var(--txt);\n\ttransform: scale(1.5);\n\tborder-radius: 100%;\n}\ninput[type=range]:hover::-webkit-slider-thumb {\n\tbackground: var(--bg-x);\n}\ninput[type=range]:focus::-webkit-slider-thumb {\n\tborder-color: var(--bg);\n\tbackground: var(--txt);\n}\ninput[type=range]::-moz-range-thumb {\n\ttransition: inherit;\n\tbackground: var(--bg);\n\twidth: 1rem;\n\theight: 1rem;\n\tborder: 0.1rem solid var(--txt);\n\ttransform: scale(1.5);\n\tborder-radius: 100%;\n\tbox-sizing: border-box;\n}\ninput[type=range]:hover::-moz-range-thumb {\n\tbackground: var(--bg-x);\n}\ninput[type=range]:focus::-moz-range-thumb {\n\tborder-color: var(--bg);\n\tbackground: var(--txt);\n}\ninput#light,\ninput#fade,\ninput#vignette {\n\t--gradient: black, #8880, white\n}\ninput#contrast {\n\t--gradient: gray, #8880\n}\ninput#warmth,\ninput#tilt {\n\t--gradient: #88f, #8880, #ff8\n}\ninput#tint,\ninput#pan {\n\t--gradient: #f8f, #8880, #8f8\n}\ninput#sepia {\n\t--gradient: #8880, #aa8\n}\ninput#hue,\ninput#rotate {\n\tbackground: linear-gradient(90deg, hsl(0, 80%, 75%), hsl(60, 80%, 75%), hsl(120, 80%, 75%), hsl(180, 80%, 75%), hsl(240, 80%, 75%), hsl(300, 80%, 75%), hsl(0, 80%, 75%), hsl(60, 80%, 75%), hsl(120, 80%, 75%), hsl(180, 80%, 75%), hsl(240, 80%, 75%), hsl(300, 80%, 75%), hsl(0, 80%, 75%))\n}\ninput#saturate {\n\t--gradient: gray, #8880 50%, blue, magenta\n}\ninput#blur {\n\t--gradient: #8880, gray\n}\ninput#scale,\ninput#pillarbox,\ninput#letterbox {\n\t--gradient: black, white\n}\n`;const c={light:{en:"light",es:"brillo",fr:"lumin",pt:"brilho",zh:"亮度"},contrast:{en:"contrast",es:"contraste",fr:"contraste",pt:"contraste",zh:"对比度"},warmth:{en:"warmth",es:"calor",fr:"chaleur",pt:"calor",zh:"温度"},tint:{en:"tint",es:"tinción",fr:"teinte",pt:"verde",zh:"色调"},sepia:{en:"sepia",es:"sepia",fr:"sépia",pt:"sépia",zh:"泛黄"},hue:{en:"hue",es:"tono",fr:"ton",pt:"matiz",zh:"色相"},saturate:{en:"saturate",es:"satura",fr:"sature",pt:"satura",zh:"饱和度"},blur:{en:"blur",es:"difuminar",fr:"flou",pt:"enevoa",zh:"模糊"},fade:{en:"fade",es:"fundido",fr:"fondu",pt:"fundido",zh:"淡出"},vignette:{en:"vignette",es:"viñeta",fr:"vignette",pt:"vinheta",zh:"虚光照"},rotate:{en:"rotate",es:"rota",fr:"pivote",pt:"rota",zh:"旋转"},scale:{en:"scale",es:"zoom",fr:"zoom",pt:"zoom",zh:"大小"},pan:{en:"pan",es:"panea",fr:"pan",pt:"panea",zh:"左右移动"},tilt:{en:"tilt",es:"inclina",fr:"incline",pt:"empina",zh:"上下移动"},pillarbox:{en:"pillarbox",es:"recorta-h",fr:"taille-h",pt:"recorta-h",zh:"左右裁剪"},letterbox:{en:"letterbox",es:"recorta-v",fr:"taille-v",pt:"recorta-v",zh:"上下裁剪"},text:{en:"text",es:"texto",fr:"texte",pt:"texto",zh:"文字"},mirror:{en:"mirror",es:"refleja",fr:"réfléch",pt:"refleja",zh:"反射"},freeze:{en:"freeze",es:"pausa",fr:"arrête",pt:"pausa",zh:"暂停"},presets:{en:"presets",es:"preadjustes",fr:"préréglages",pt:"preadjustes",zh:"预设"},open_tip:{en:"Open",es:"Abre",fr:"Ouvre",pt:"Aberto",zh:"打开"},close_tip:{en:"Close",es:"Cierra",fr:"Ferme",pt:"Feche",zh:"合起"},minimize_tip:{en:"Minimize",es:"Minimizas",fr:"Minimise",pt:"Minimiza",zh:"合起"},previews_tip:{en:" previews",es:" visualizaciones",fr:" aperçus",pt:"visualizações",zh:"预览"},studio_tip:{en:" studio",es:" estudio",fr:" studio",pt:" estúdio",zh:"画室"},text_tip:{en:"Write text here",es:"Escribe el texto aquí",fr:"Écrivez du texte ici",pt:"Escreva o texto aqui",zh:"在这里写字"},donate_tip:{en:"Donate to the dev",es:"Donas al dev",fr:"Fais un don au dev",pt:"Você doa para o dev",zh:"捐款给作者"}},d=["en","es","fr","pt","zh"];i.lang=d.find(t=>t===navigator.language.split("-")[0])||"en";for(const t in c)c[t]=c[t][i.lang];const p=document.createElement("section");p.id="fields";const u={light:"range",contrast:"range",warmth:"range",tint:"range",sepia:"range_positive",hue:"range_loop",saturate:"range",blur:"range_positive",fade:"range",vignette:"range",rotate:"range_loop",scale:"range_positive",pan:"range",tilt:"range",pillarbox:"range_positive",letterbox:"range_positive",text:"textarea",mirror:"checkbox",freeze:"checkbox",presets:"radio"},m={light:0,contrast:0,warmth:0,tint:0,sepia:0,hue:0,saturate:0,blur:0,fade:0,vignette:0,rotate:0,scale:0,pan:0,tilt:0,pillarbox:0,letterbox:0,text:"",mirror:!1,freeze:!1,presets:"reset"},h=JSON.parse(window.localStorage.getItem("mercator-studio-values-20"))||{},f={reset:{},concorde:{contrast:.1,warmth:-.25,tint:-.05,saturate:.2},mono:{light:.1,contrast:-.1,sepia:.8,saturate:-1,vignette:-.5},matcha:{light:.1,tint:-.75,sepia:1,hue:.2,vignette:.3,fade:.3},deepfry:{contrast:1,saturate:.5}},g={...m,...h},b=Object.fromEntries(Object.entries(g).map(([n,r])=>{let i;const o=u[n];switch(o){case"textarea":(i=document.createElement("textarea")).rows=3,i.placeholder=`\n🌈 ${c.text_tip} 🌦️`,i.addEventListener("input",()=>{t(i,(i.value+"").replace(/--/g,"―").replace(/\\sqrt/g,"√").replace(/\\pm/g,"±").replace(/\\times/g,"×").replace(/\\cdot/g,"·").replace(/\\over/g,"∕").replace(/(\^|\_)(\d+)/g,(t,e,n)=>n.split("").map(t=>String.fromCharCode(t.charCodeAt(0)+("_"===e?8272:"1"===t?136:"23".includes(t)?128:8256))).join("")))});break;case"checkbox":(i=document.createElement("input")).type="checkbox",i.addEventListener("change",()=>t(i,i.checked));break;case"radio":(i=document.createElement("label")).append(...Object.keys(f).map(e=>{const n=document.createElement("button");return n.textContent=e,n.addEventListener("click",n=>{n.preventDefault(),Object.entries({...m,...f[e]}).forEach(([e,n])=>t(b[e],n))}),n}));break;default:(i=document.createElement("input")).type="range",i.min=("range_positive"===o)-1,i.max=1;const n=i.max-i.min;i.step=n/32,i.addEventListener("keydown",({code:t,ctrlKey:r,shiftKey:a})=>{"Digit0"===t&&e(i),i.step=n/(a?512:r?128:32)}),i.addEventListener("keyup",()=>i.step=n/32),i.addEventListener("input",()=>{i.focus(),t(i,i.valueAsNumber)}),i.addEventListener("wheel",e=>{e.preventDefault(),i.focus();const n=i.getBoundingClientRect().width,r=-e.deltaX,a=e.deltaY,o=(Math.abs(r)>Math.abs(a)?r:a)/n,s=i.max-i.min,l=i.valueAsNumber+o*s,c=Math.min(Math.max(l,i.min),i.max),d=Math.round(c/i.step)*i.step;t(i,d)}),i.addEventListener("contextmenu",t=>{t.preventDefault(),e(i)})}if(i.value=r,i.id=n,!a||!["warmth","tint"].includes(n)){let t=document.createElement("label");t.textContent=c[n],t.append(i),p.append(t)}return[n,i]}));function t(t,e){g[t.id]=t.value=e,window.localStorage.setItem("mercator-studio-values-20",JSON.stringify(g))}function e(e){t(e,m[e.id])}const v="http://www.w3.org/2000/svg",x=document.createElementNS(v,"svg"),w=document.createElementNS(v,"filter");w.id="filter";const z=document.createElementNS(v,"feComponentTransfer"),y=Object.fromEntries(["R","G","B"].map(t=>{const e=document.createElementNS(v,"feFunc"+t);return e.setAttribute("type","table"),e.setAttribute("tableValues","0 1"),[t,e]}));z.append(...Object.values(y)),w.append(z),x.append(w);const k=document.createElement("label");k.htmlFor="minimize",k.dataset.off=`${c.minimize_tip}${c.previews_tip} (ctrl + shift + m)`,k.dataset.on=`${c.open_tip}${c.previews_tip} (ctrl + shift + m)`,k.textContent=k.dataset.off;const E=document.createElement("label");E.htmlFor="previews",E.dataset.off=`${c.open_tip}${c.studio_tip} (ctrl + m)`,E.dataset.on=`${c.close_tip}${c.studio_tip} (ctrl + m)`,E.textContent=E.dataset.off;const L=document.createElement("label");L.htmlFor="donate",L.textContent=c.donate_tip;const _=document.createElement("section");_.id="tips",_.append(k,E,L);const M=()=>{_.querySelectorAll(".show").forEach(t=>t.classList.remove("show"));const t=_.querySelector(".hover")||_.querySelector(".focus");t&&t.classList.add("show")},$=(t,e)=>{t.addEventListener("mouseenter",()=>{e.classList.add("hover"),M()}),t.addEventListener("mouseleave",()=>{e.classList.remove("hover"),M()}),t.addEventListener("focus",()=>{e.classList.add("focus"),M()}),t.addEventListener("blur",()=>{e.classList.remove("focus"),M()})},S=document.createElement("section");S.id="bar";const C=document.createElement("button");C.id="minimize",C.textContent="◀";const j=()=>{i.classList.remove("edit"),i.classList.toggle("minimize"),C.focus();const t=i.classList.contains("minimize");C.textContent=t?"▶":"◀",k.textContent=k.dataset[t?"on":"off"],k.classList.remove("focus"),M()};C.addEventListener("click",j),$(C,k);const A=document.createElement("a");A.id="donate",A.href="https://ko-fi.com/xingyzt",A.target="_blank",A.textContent="🤍",A.setAttribute("aria-label",c.donate_tip),$(A,L);const R=document.createElement("button");R.id="previews";const D=()=>{i.classList.remove("minimize"),i.classList.toggle("edit"),R.focus();const t=i.classList.contains("edit");t?Object.values(b)[0].focus():R.focus(),E.textContent=E.dataset[t?"on":"off"],E.classList.remove("focus"),M()};R.addEventListener("click",D),$(R,E),window.addEventListener("keydown",t=>{"KeyM"==t.code&&t.ctrlKey&&(t.preventDefault(),t.shiftKey?j(t):D(t))});const O=document.createElement("video");O.setAttribute("playsinline",""),O.setAttribute("autoplay",""),O.setAttribute("muted","");const B=Object.fromEntries(["buffer","freeze","display"].map(t=>{const e=document.createElement("canvas"),n=e.getContext("2d");return[t,{element:e,context:n}]})),I=document.createElement("h2");I.id="title",I.innerText="Mercator\nStudio",R.append(O,I,B.buffer.element),S.append(C,R,A),i.append(S,_,p),r.append(i,o,x),document.body.append(n);const T=(t,e)=>(t+1)**e,F=(t,e=32)=>Array(e).fill(0).map((n,r)=>Math.pow(r/(e-1),2**t)).join(" "),N=t=>100*t+"%",q=8;let U=0;class V extends MediaStream{constructor(t){super(t),O.srcObject=t;const e=t.getVideoTracks()[0].getSettings(),n=e.width,r=e.height,i=[n/2,r/2];Object.values(B).forEach(t=>{t.element.width=n,t.element.height=r});B.buffer.buffer;const o=B.buffer.context,s={state:!1,init:!1,image:document.createElement("img"),canvas:B.freeze};b.freeze.addEventListener("change",t=>{s.state=s.init=t.target.checked}),o.textAlign="center",o.textBaseline="middle",clearInterval(U),U=setInterval(function(){o.clearRect(0,0,n,r),b.hue.value%=1,b.rotate.value%=1;let t=g,e=N(T(t.light,2)),c=N(T(t.contrast,3)),d=a?0:t.warmth,p=a?0:t.tint,u=N(t.sepia),m=360*t.hue+"deg",h=N(q**t.saturate),f=t.blur*n/16+"px",v=t.fade,x=t.vignette,w=2*t.rotate*Math.PI,z=T(t.scale,2),k=t.mirror,E=t.pan*n,L=t.tilt*r,_=t.pillarbox*n/2,M=t.letterbox*r/2,$=t.text.split("\n");if(y.R.setAttribute("tableValues",F(p/2-d)),y.G.setAttribute("tableValues",F(-p)),y.B.setAttribute("tableValues",F(d+p/2)),o.filter=`\n\t\t\t\t\tbrightness(${e})\n\t\t\t\t\tcontrast(${c})\n\t\t\t\t\t${"url(#filter)".repeat(Boolean(d||p))}\n\t\t\t\t\tsepia(${u})\n\t\t\t\t\thue-rotate(${m})\n\t\t\t\t\tsaturate(${h})\n\t\t\t\t\tblur(${f})\n\t\t\t\t`,o.translate(...i),w&&o.rotate(w),z-1&&o.scale(z,z),k&&o.scale(-1,1),(E||L)&&o.translate(E,L),o.translate(-n/2,-r/2),s.init){s.canvas.context.drawImage(O,0,0,n,r);let t=s.canvas.element.toDataURL("image/png");s.image.setAttribute("src",t),s.init=!1}else s.state?o.drawImage(s.image,0,0,n,r):O.srcObject?o.drawImage(O,0,0,n,r):"18, 100%, 68%; -10,100%,80%; 5, 90%, 72%; 48, 100%, 75%; 36, 100%, 70%; 20, 90%, 70%".split(";").forEach((t,e)=>{o.fillStyle=`hsl(${t})`,o.fillRect(e*n/6,0,n/6,r)});if(o.setTransform(1,0,0,1,0,0),o.filter="brightness(1)",v){let t=100*Math.sign(v),e=Math.abs(v);o.fillStyle=`hsla(0,0%,${t}%,${e})`,o.fillRect(0,0,n,r)}if(x){let t=100*Math.sign(x),e=Math.abs(x),a=o.createRadialGradient(...i,0,...i,Math.sqrt((n/2)**2+(r/2)**2));a.addColorStop(0,`hsla(0,0%,${t}%,0`),a.addColorStop(1,`hsla(0,0%,${t}%,${e}`),o.fillStyle=a,o.fillRect(0,0,n,r)}if(_&&(o.clearRect(0,0,_,r),o.clearRect(n,0,-_,r)),M&&(o.clearRect(0,0,n,M),o.clearRect(0,r,n,-M)),$){const t=.9*(n-2*_),e=.9*(r-2*M);o.font=`bold ${t}px ${l}`;let a=o.measureText("0"),s=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent,c=$.reduce((t,e)=>Math.max(t,o.measureText(e).width),0);const d=Math.min(t**2/c,e**2/s/$.length);o.font=`bold ${d}px ${l}`,a=o.measureText("0"),s=1.5*(a.actualBoundingBoxAscent+a.actualBoundingBoxDescent),o.lineWidth=d/8,o.strokeStyle="black",o.fillStyle="white",$.forEach((t,e)=>{let n=i[0],r=i[1]+s*(e-$.length/2+.5);o.strokeText(t,n,r),o.fillText(t,n,r)})}B.display.context.clearRect(0,0,n,r),B.display.context.drawImage(B.buffer.element,0,0)},33);const c=B.display.element.captureStream(30);return c.addEventListener("inactive",()=>{t.getTracks().forEach(t=>{t.stop()}),B.display.context.clearRect(0,0,n,r),O.srcObject=null}),c}}MediaDevices.prototype.old_getUserMedia=MediaDevices.prototype.getUserMedia,MediaDevices.prototype.getUserMedia=(async t=>t&&t.video&&!t.audio?new V(await navigator.mediaDevices.old_getUserMedia(t)):navigator.mediaDevices.old_getUserMedia(t))}catch(t){alert(t)}})()' aria-label='Bookmarklet'>
					<svg height='32' viewBox="2 2 20 20"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" fill="#444"/></svg>
					<span hidden>Mercator Studio</span>
				</a>
			</section>
			<button id='play-video'>Test it out! <noscript>(requires JavaScript)</noscript></button>
			<video width='800' height='450'></video>
			<section id='readme'>
Mercator Studio gives you fine control over your appearance on Google Meet.

Write text & emoji in front of your face:
· Auto-adjusts size to fit any length of text onto the screen.
· Auto-converts \sqrt to √, \times to ×, \cdot to ·, \pm to ±, ^number to ¹², and _number to ₄₂.

Precisely adjust lighting and colors:
· Exposure & Contrast
· Temperature & Tint
· Hue & Saturation
· Sepia & Blur
· Fade & Vignette

Move the focus to where you want it:
· Rotate, Scale, Mirror & Flip
· Horizontal & Vertical Translate
· Pillarbox & Letterbox Crop

Somewhat nice presets:
· Concorde
· Mono
· Matcha
· Deepfry

Scroll, drag, or use arrow keys on the sliders to adjust, right click or press 0 on them to reset, and hold down Ctrl or Shift for finer steps.

Ctrl+M to open/close the interface, Ctrl+Shift+M to minimize it.

Translated for português, español, français, & 中文.

Changelog:
· 2.1 Translate from EN into PT, ES, FR, and ZH.
· 2.1 Improve keyboard navigation.
· 2.0 Redesign for Google Meet’s new look.
· 1.19 Add mirroring; Dark mode support.
· 1.18 Make textbox auto-resize; Ctrl or Shift for finer steps.
· 1.17 Fix flickering and window-focus issues.
· 1.16 Add freeze feature (thanks @napsav).
· 1.15 Add toggle to super tiny mode.
· 1.14 Add math auto-convert.
· 1.13 Preserve values across sessions.
· 1.12 Luminance-preserving temperature & tint.
· 1.11 Multiline text input; Rebranded as Mercator Studio for Google Meet.
· 1.10 Sync camera; Capture scroll; Right-click reset; Firefox support.
· 1.9 Add text & emoji input.
· 1.8 Add presets; Matched UI with material design.
· 1.7 Add color balance tools and refined UI.
· 1.6 Add fog.
· 1.5 Add vignettes.
· 1.4 Converted to Chrome extension.
· 1.3 Fix the blur slider's range.
· 1.2 Add cropping.
· 1.1 Add a way to reset everything.
· 1.0 Hello world!

Source code: https://github.com/FlyOrBoom/mercator

Available for other browsers: https://x-ing.space/mercator
Unfortunately, temperature & tint filters don't work in Firefox.

(C) Xing Liu 2020-2021, MIT License

Check out other things I’ve made at https://x-ing.space.
			</section>
		</main>
		<script src='mercator-studio/script.js'></script>
		<script>
const video = document.querySelector('video')
const play = document.querySelector('#play-video')
play.addEventListener('click',()=>{
	navigator.mediaDevices.getUserMedia({
		video: true
	}).then( stream => {
		video.srcObject = stream
		video.play()
		video.style.display = 'block'
		play.remove()
		document.querySelector('aside').shadowRoot.querySelector('#previews').focus()
	})
})
		</script>
	</body>
</html>
